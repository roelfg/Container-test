FROM centos:centos7
#COPY . /app
ADD bootstrap.sh /
RUN chmod +x bootstrap.sh && /bootstrap.sh
COPY etc/resolv.conf /etc/resolv.conf
COPY etc/profile.d/03-condor_environment.sh /etc/profile.d/03-condor_environment.sh
COPY etc/profile.d/05-helpful_env.sh /etc/profile.d/05-helpful_env.sh
COPY etc/profile.d/10-fixup_singularity.sh /etc/profile.d/10-fixup_singularity.sh
COPY etc/profile.d/11-container_fixes.sh /etc/profile.d/11-container_fixes.sh
COPY etc/profile.d/12-resources_and_mt.sh /etc/profile.d/12-resources_and_mt.sh
COPY etc/profile.d/13-prompt_setup.sh /etc/profile.d/13-prompt_setup.sh
COPY etc/profile.d/20-cuda.sh /etc/profile.d/20-cuda.sh
COPY etc/profile.d/21-condor_mpi.sh /etc/profile.d/21-condor_mpi.sh
COPY etc/profile.d/22-condor_fixes.sh /etc/profile.d/22-condor_fixes.sh
COPY etc/profile.d/60-setupATLAS.sh /etc/profile.d/60-setupATLAS.sh
COPY etc/profile.d/60-setupBelle.sh /etc/profile.d/60-setupBelle.sh
COPY etc/profile.d/70-belleEnv.sh /etc/profile.d/70-belleEnv.sh
COPY etc/condor/grid_mapfile /etc/condor/grid_mapfile
COPY etc/condor/condor_config.local /etc/condor/condor_config.local
COPY etc/condor/config.d/000.condor_constants.cfg /etc/condor/config.d/000.condor_constants.cfg
#COPY etc/condor/config.d/004.condor_partitionable_slots.cfg /etc/condor/config.d/004.condor_partitionable_slots.cfg
#COPY etc/condor/config.d/005.condor_node.cfg /etc/condor/config.d/005.condor_node.cfg
#COPY etc/condor/config.d/008.gridka_wn.cfg /etc/condor/config.d/008.gridka_wn.cfg
#COPY etc/condor/config.d/010.condor_security.cfg /etc/condor/config.d/010.condor_security.cfg
#COPY etc/condor/config.d/100.worker.cfg /etc/condor/config.d/100.worker.cfg
COPY etc/site-config/atlas/setup.sh.local /etc/site-config/atlas/setup.sh.local
COPY usr/local/bin/pilot /usr/local/bin/pilot
COPY usr/local/bin/get-condor-cobald-config /usr/local/bin/get-condor-cobald-config
COPY usr/local/bin/call-condor-git-config /usr/local/bin/call-condor-git-config
COPY usr/libexec/condor_pilot/jobwrapper.sh /usr/libexec/condor_pilot/jobwrapper.sh
